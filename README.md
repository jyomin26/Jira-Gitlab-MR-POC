# Jira-GitLab Merge Request POC

This project automates **GitLab Merge Request (MR) creation and code review suggestions** using Jira details and the Gemini API and Gitlab API.

---

## **Scripts**

### 1. `postMRDescription.js`

* Fetches Jira issue details using the Jira ID from the branch name.
* Creates or updates a GitLab MR for that branch against the `master` branch.
* Adds an MR description automatically using Jira details and commit differences, with text generated by the Gemini API.

### 2. `codeSuggestions.js`

* Fetches the open MR ID for a branch.
* Retrieves the commit differences for that MR.
* Sends the diff to Gemini API to get **line-specific code review suggestions**.
* Adds the suggestions as **inline comments** in the open GitLab MR.

---

## **Quick Start**

1. Clone the repository:

```bash
git clone <your-repo-url>
cd <repo-folder>
```

2. Install dependencies:

```bash
npm install
```

3. Run the MR description automation:

```bash
node postMRDescription.js
```

4. Run the code suggestions automation:

```bash
node codeSuggestions.js
```

---

## **Configuration**

All configuration is stored in the `.env` file at the root of the project:

```env
JIRA_TICKET_ID=<your_ticket_id>
GITLAB_PROJECT_ID=<your_project_id>
GITLAB_API_URL=<your_gitlab_url>
GITLAB_TOKEN=<your_gitlab_private_token>
GITLAB_BRANCH_NAME=<your_branch_name>
GEMINI_API_KEY=<your_gemini_api_key>
```

* **Change the Jira ticket ID** by updating `JIRA_TICKET_ID` in `.env`.
* Make sure you have a valid **GitLab token** with API permissions and a **Gemini API key**.

---

## **Notes**

* The scripts use **Gemini API** for automated text generation and code review suggestions.
* Ensure your MR branch has changes; otherwise, `codeSuggestions.js` may not generate any suggestions.
* Inline suggestions are added based on **exact line numbers** from the MR diff.
